let $form=$(".controller"),$txtNub=$('input[type="number"]'),$btnDraw=$('input[type="button"]'),Data=[],chart=null;function onGenClick(t){t.preventDefault(),$btnDraw.removeAttribute("disabled"),generateData(),displayDataTable()}function onDrawClick(){chart=echarts.init($(".diagram"));let t={title:{text:"自信息量函数曲线",x:"center",y:0},tooltip:{formatter:"(pi, I)：({c})"},grid:[{left:"30%",width:"40%"}],xAxis:{type:"value",axisPointer:{show:"true"}},yAxis:{type:"value",axisPointer:{show:"true"}},series:[{name:"自信息量",type:"line",smooth:"true",data:Data}]};chart.setOption(t,!0)}function generateData(){let t=1/$txtNub.value;Data=[];for(let a=t;a<1;a+=t){let t=[];t.push(roundFractional(a,3)),t.push(i(a)),Data.push(t)}1!==Data[Data.length-1][0]&&Data.push([1,0])}function displayDataTable(){$(".data-table").innerHTML="<table><thead><tr><td>NO.</td><td>p</td><td>I(xi)</td></tr><tbody></tbody></table>";let t=$("tbody"),a="";for(let t=0;t<Data.length;t++)a+=`<tr><td>${t+1}</td><td>${Data[t][0]}</td><td>${Data[t][1]}</td></tr>`;t.innerHTML=a}$form.onsubmit=onGenClick,$btnDraw.onclick=onDrawClick,window.onresize=function(){null!==chart&&chart.resize()};